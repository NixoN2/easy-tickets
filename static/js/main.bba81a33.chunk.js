(this["webpackJsonpeasy-tickets"]=this["webpackJsonpeasy-tickets"]||[]).push([[0],{20:function(e,t){},27:function(e,t,s){},55:function(e,t){},56:function(e,t){},57:function(e,t){},58:function(e,t){},59:function(e,t){},62:function(e,t,s){"use strict";s.r(t);var c=s(1),n=s.n(c),a=s(21),l=s.n(a),i=(s(27),s(4)),r=s(10),o=s(8),u=s.n(o),d=s(12),f=s(2),j=function(e){var t=Object(c.useState)(""),s=Object(i.a)(t,2),n=s[0],a=s[1],l=Object(c.useState)([]),o=Object(i.a)(l,2),j=o[0],b=o[1],m=Object(c.useState)(null),p=Object(i.a)(m,2),h=p[0],O=p[1],k=Object(c.useState)([]),x=Object(i.a)(k,2),g=x[0],v=x[1],N=function(){var e=Object(d.a)(u.a.mark((function e(t){var s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(s=new FileReader).onload=function(){var e=Object(d.a)(u.a.mark((function e(t){var s,c,n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=t.target.result,c=s.split(";"),n=[],a=[],c.forEach((function(e){var t=e.split("|")[0].split(" "),s=e.split("|")[1];s=[Number(s.split("-")[0]),Number(s.split("-")[1])],n.push(s),""===t[0]&&(t[0]=t[1]),a.push([t[0].match(/\d+/g)[0],t.slice(1).join(" ")])})),b(a),v(n);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s.readAsText(t.target.files[0],"windows-1251");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var t=Object(d.a)(u.a.mark((function t(s){var c;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s.preventDefault(),(c=new FileReader).onload=function(){var t=Object(d.a)(u.a.mark((function t(s){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:O(s.target.result),e.setPdf(s.target.result),s.target.result&&e.setPdfDownloaded(!0);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c.readAsDataURL(s.target.files[0]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{onChange:function(e){a(e.target.value)},id:"listName",className:"mt-2 ml-2 w-64 h-8 rounded-lg",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0441\u043f\u0438\u0441\u043a\u0430: "}),Object(f.jsx)("label",{className:"ml-3",for:"file",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u0430\u0439\u043b \u0441 \u0432\u043e\u043f\u0440\u043e\u0441\u0430\u043c\u0438:"}),Object(f.jsx)("input",{className:"mt-2 ml-2",id:"file",onChange:N,type:"file"}),Object(f.jsx)("label",{className:"ml-3",for:"pdf",children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 PDF-\u0444\u0430\u0439\u043b \u0441 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u0430\u043c\u0438:"}),Object(f.jsx)("input",{className:"ml-2",onChange:w,type:"file",id:"pdf"}),Object(f.jsx)("button",{onClick:function(t){t.preventDefault(),h&&e.setPdfDownloaded(!0),e.setTickets([n,j,Object(r.a)(j.map((function(e){return!1}))),h,g]),e.setTotal(j.length),localStorage.setItem("lists",JSON.stringify(e.lists?e.lists.concat([[n,j,Object(r.a)(j.map((function(e){return!1}))),g]]):[].concat([[n,j,Object(r.a)(j.map((function(e){return!1}))),g]]))),localStorage.setItem("listNames",JSON.stringify(e.listNames?e.listNames.concat(n):[].concat(n))),e.setLists(e.lists?e.lists.concat([[n,j,Object(r.a)(j.map((function(e){return!1}))),g]]):[].concat([[n,j,Object(r.a)(j.map((function(e){return!1}))),g]])),e.setListNames(e.listNames?e.listNames.concat(n):[].concat(n)),a(""),document.getElementById("listName").value="",document.getElementById("file").value="",document.getElementById("pdf").value="",b([])},className:"w-24 h-8 bg-purple-400 rounded-xl",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"})]})},b=function(e){return Object(f.jsxs)("div",{className:"ml-2",children:[e.done," / ",e.total]})},m=function(e){return Object(f.jsxs)("div",{className:"flex",children:[Object(f.jsxs)("p",{className:"ml-2 mr-3",children:[e.position,":"]}),Object(f.jsx)("p",{children:e.text}),Object(f.jsx)("button",{onClick:function(t){t.preventDefault(),e.checked?e.setDone(e.done-1):e.setDone(e.done+1),localStorage.setItem("lists",JSON.stringify(e.lists.filter((function(t){return t[0]!==e.tickets[0]})).concat([[e.tickets[0],e.tickets[1],e.tickets[2].slice(0,e.idx).concat([!e.checked]).concat(e.tickets[2].slice(e.idx+1))]]))),e.setTickets([e.tickets[0],e.tickets[1],e.tickets[2].slice(0,e.idx).concat([!e.checked]).concat(e.tickets[2].slice(e.idx+1))]),e.setLists(e.lists.filter((function(t){return t[0]!==e.tickets[0]})).concat([e.tickets]))},className:"w-5 rounded-sm h-5 mt-1 ml-1 ".concat(e.checked?"bg-blue-500":"bg-white")}),e.pdfDownloaded?Object(f.jsx)("button",{onClick:function(t){t.preventDefault(),e.handleClose(),e.setTicket(e.idx)},className:"ml-4 mt-1 w-24 h-6 bg-purple-400 rounded-xl",children:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c"}):null]})},p=function(e){return Object(f.jsxs)("div",{className:"w-screen",children:[Object(f.jsx)("button",{onClick:function(t){t.preventDefault();for(var s=e.tickets[0],c=0;c<e.lists.length;++c)e.lists[c][0]===s&&(e.setLists(e.lists.splice(c,1)),localStorage.setItem("lists",JSON.stringify(e.lists)));for(var n=0;n<e.listNames.length;++n)e.listNames[n]===s&&(e.setListNames(e.listNames.splice(n,1)),localStorage.setItem("listNames",JSON.stringify(e.listNames)))},className:"w-32 h-8 bg-purple-400 rounded-xl ml-2 mt-2",children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}),e.tickets[1]?e.tickets[1].map((function(t,s){return Object(f.jsx)(m,{pdfDownloaded:e.pdfDownloaded,setTicket:e.setTicket,handleClose:e.handleClose,position:t[0],lists:e.lists,setLists:e.setLists,text:t[1],setTickets:e.setTickets,checked:e.tickets[2][s],idx:s,done:e.done,tickets:e.tickets,setDone:e.setDone})})):null]})},h=function(e){var t=Object(c.useState)(""),s=Object(i.a)(t,2),n=s[0],a=s[1];return Object(f.jsxs)("div",{children:[Object(f.jsx)("button",{onClick:function(t){t.preventDefault(),console.log(e.tickets[1]);var s=Math.floor(Math.random()*e.tickets[1].length),c=e.tickets[1][s][0]+". "+e.tickets[1][s][1];a(c)},className:"w-40 mt-2 ml-2 rounded-xl h-8 bg-purple-400 mr-4",children:"\u0420\u0430\u043d\u0434\u043e\u043c\u043d\u044b\u0439 \u0432\u043e\u043f\u0440\u043e\u0441"}),n||null]})},O=s(9);O.c.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(O.c.version,"/pdf.worker.js");var k=function(e){var t=Object(c.useState)(null),s=Object(i.a)(t,2),n=(s[0],s[1]),a=Object(c.useState)(1),l=Object(i.a)(a,2),r=(l[0],l[1]);var o=e.show?"fixed top-0 left-0 w-screen h-screen bg-black bg-opacity-50 block":"fixed top-0 left-0 w-screen h-screen bg-black bg-opacity-50 hidden",u=e.pages&&e.pages[e.ticket]&&e.pages[e.ticket][1]-e.pages[e.ticket][0]+1;return Object(f.jsx)("div",{className:o,onClick:e.handleClose,children:Object(f.jsxs)("section",{className:"fixed bg-white w-4/5 h-full overflow-auto max-h-192 top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:[Object(f.jsx)("button",{type:"button",className:"ml-2 mt-2",onClick:e.handleClose,children:Object(f.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8 opacity-40",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(f.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),Object(f.jsx)(O.a,{file:e.file,onLoadSuccess:function(e){var t=e.numPages;n(t),r(1)},className:"w-3/5 mx-auto",children:Array.from(new Array(u),(function(t,s){return Object(f.jsx)(O.b,{pageNumber:s+Number(e.pages&&e.pages[e.ticket][0]),scale:2.5},"page_".concat(s+1))}))})]})})},x=function(){var e=JSON.parse(localStorage.getItem("lists")),t=JSON.parse(localStorage.getItem("listNames")),s=Object(c.useState)(null!=e?e:[]),n=Object(i.a)(s,2),a=n[0],l=n[1],r=Object(c.useState)(null!=t?t:[]),o=Object(i.a)(r,2),u=o[0],d=o[1],m=Object(c.useState)([]),O=Object(i.a)(m,2),x=O[0],g=O[1],v=Object(c.useState)(0),N=Object(i.a)(v,2),w=N[0],S=N[1],y=Object(c.useState)(0),D=Object(i.a)(y,2),C=D[0],L=D[1],T=Object(c.useState)(!1),I=Object(i.a)(T,2),J=I[0],P=I[1],B=Object(c.useState)(0),E=Object(i.a)(B,2),A=E[0],M=E[1],F=Object(c.useState)(!1),R=Object(i.a)(F,2),W=R[0],z=R[1],G=Object(c.useState)(""),U=Object(i.a)(G,2),V=U[0],_=U[1],q=function(e){P(!J)};return Object(f.jsxs)("div",{className:"w-screen h-screen bg-blue-200 overflow-y-scroll overflow-x-hidden",children:[Object(f.jsx)(k,{handleClose:q,file:V,pages:x[3],ticket:A,show:J}),Object(f.jsxs)("div",{children:[Object(f.jsxs)("select",{defaultValue:"default",onChange:function(e){e.preventDefault();for(var t=0;t<a.length;++t)e.target.value===a[t][0]&&(g(a[t]),S(a[t][1].length),L(a[t][2].filter((function(e){return!0===e})).length))},className:"mt-2 ml-2",children:[Object(f.jsx)("option",{disabled:!0,value:"default",hidden:!0,children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u044d\u043a\u0437\u0430\u043c\u0435\u043d"}),u?u.map((function(e){return Object(f.jsx)("option",{children:e})})):null]}),Object(f.jsx)(j,{setPdf:_,setPdfDownloaded:z,setTickets:g,setTotal:S,lists:a,setLists:l,setListNames:d,listNames:u}),Object(f.jsx)(b,{total:w,done:C}),Object(f.jsx)(h,{tickets:x}),Object(f.jsx)(p,{pdfDownloaded:W,setTicket:M,handleClose:q,lists:a,setLists:l,setTickets:g,listNames:u,setListNames:d,tickets:x,done:C,setDone:L})]})]})};l.a.render(Object(f.jsx)(n.a.StrictMode,{children:Object(f.jsx)(x,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.bba81a33.chunk.js.map